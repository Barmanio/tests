{% extends "base.html" %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å ‚Äî –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ–±—É—á–µ–Ω–∏—è{% endblock %}

{% block content %}
<h1>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h1>

<!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
<h2>üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
<div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 30px;">
 <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; text-align: center; width: 160px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border: 1px solid #e9ecef;">
 <strong>{{ stats.solved_tasks }}</strong><br>
 <small>–†–µ—à–µ–Ω–æ –∑–∞–¥–∞—á</small>
 </div>
 <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; text-align: center; width: 160px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border: 1px solid #e9ecef;">
 <strong>{{ stats.attempts }}</strong><br>
 <small>–í—Å–µ–≥–æ –ø–æ–ø—ã—Ç–æ–∫</small>
 </div>
</div>

<!-- –ò—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–∏–π -->
<h2>üìã –ò—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–∏–π</h2>

{% if tasks %}
<table style="width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 0.95em;">
 <thead>
 <tr>
 <th style="padding: 12px; border: 1px solid #dee2e6; background: #f8f9fa; color: #495057; font-weight: 600; text-align: left;">–ó–∞–¥–∞—á–∞</th>
 <th style="padding: 12px; border: 1px solid #dee2e6; background: #f8f9fa; color: #495057; font-weight: 600; text-align: left;">–°—Ç–∞—Ç—É—Å</th>
 <th style="padding: 12px; border: 1px solid #dee2e6; background: #f8f9fa; color: #495057; font-weight: 600; text-align: left;">–ü—Ä–æ–≥—Ä–µ—Å—Å</th>
 <th style="padding: 12px; border: 1px solid #dee2e6; background: #f8f9fa; color: #495057; font-weight: 600; text-align: left;">–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
 </tr>
 </thead>
 <tbody>
 {% for task in tasks %}
 <tr style="transition: background 0.2s; {% if task.status == 'passed' %}background-color: #d4edda; color: #155724;{% elif task.status == 'failed' %}background-color: #f8d7da; color: #721c24;{% else %}background-color: #fff3cd; color: #856404;{% endif %}">
 <td style="padding: 12px; border: 1px solid #dee2e6;">
 <a href="/tasks/{{ task.task_id }}" style="color: #2a8d9c; text-decoration: none; font-weight: 600;">{{ task.title }}</a>
 </td>
 <td style="padding: 12px; border: 1px solid #dee2e6;">{{ task.status|title }}</td>
 <td style="padding: 12px; border: 1px solid #dee2e6;">
 <div style="width: 100%; height: 10px; background-color: #e9ecef; border-radius: 5px; overflow: hidden; margin: 5px 0;">
 <div style="height: 100%; background-color: #28a745; transition: width 0.4s ease; width: {{ (task.passed_tests / task.total_tests * 100) if task.total_tests > 0 else 0 }}%;">
 </div>
 </div>
 </td>
 <td style="padding: 12px; border: 1px solid #dee2e6;">{{ task.passed_tests }} / {{ task.total_tests }}</td>
 </tr>
 {% endfor %}
 </tbody>
</table>
{% else %}
<div style="text-align: center; color: #7f8c8d; font-style: italic; padding: 20px; background: #fdfdfd; border: 1px dashed #bdc3c7; border-radius: 6px;">
 –ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ—à—ë–Ω–Ω—ã—Ö –∑–∞–¥–∞—á. –ù–∞—á–Ω–∏ —Å –ø–µ—Ä–≤–æ–π –∑–∞–¥–∞—á–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ!
</div>
{% endif %}
{% endblock %}